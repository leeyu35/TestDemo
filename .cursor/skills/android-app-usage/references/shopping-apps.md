# 购物类 APP 操作指南

购物类APP（如美团、淘宝、京东、拼多多等）有特定的交互模式，需要特别注意以下场景。

## 核心购物经验

### 商品选购策略

在用户明确要求需要挑选\选购商品的时候，要符合商品选购策略的要求。

**重要原则**: 在选购商品时,应该将看中的商品先加入购物车,而不是立即购买单个商品。

**理由**:
- 方便对比多个商品
- 避免重复查找已看中的商品
- 可以统一结算,节省时间
- 可以享受满减优惠

**操作建议**:
1. 浏览商品时,看到心仪的商品点击"加入购物车"
2. 继续浏览其他商品,重复加购
3. 所有商品选好后,进入购物车统一结算
4. 在商品列表里如果有 “+” 或 “加购” 之类的按钮，通过 hierarchyId 定位找到它直接进行加购，这样操作会更快

## 1. 购物车操作

### 场景
进入购物车，需要选择商品并结算

### 操作流程
1. `screenshot()` 查看购物车状态
2. 通过 `get_ui_elements()` 找到目标商品的复选框
3. 点击复选框选中商品（不要使用"全选"，除非确认购物车里只有需要的商品）
4. 确认选中后，点击"去结算"按钮

### 注意事项
- 购物车里可能有多个店铺的商品，需要精确选择目标商品
- 不要盲目使用"全选"，会把不需要的商品也加入订单
- 复选框通常没有 text，需要使用 hierarchyId 定位

## 2. 规格选择对话框（必选品/SKU）

### 场景
点击商品后弹出规格选择对话框（如颜色、尺寸、餐具等）

### 典型UI特征
- 选项左侧显示选项名称和描述
- 右侧有 "+" 按钮用于增加数量
- 底部有"确定"或"加入购物车"按钮

### 重要理解
- "+" 按钮的作用是**将数量从0变为1**，代表**选择**该选项
- 这不是增加购买数量，而是选择该规格/选项
- **必须使用完整的 hierarchyId 定位**（详见 `element-locating.md`）

### 操作流程
1. `screenshot()` 查看规格选择对话框
2. `get_ui_elements(onlyClickable=true, includeHierarchyId=true)` 获取所有可点击元素
3. 找到目标规格对应的 "+" 按钮（通过 hierarchyId 或 childTexts 识别）
4. `tap(hierarchyId="完整路径")` 点击 "+" 按钮
5. `screenshot()` 确认选择成功（数量从 0 变为 1）
6. `tap(text="确定")` 或 `tap(text="加入购物车")` 提交

### 注意事项
- 不要尝试直接点击规格名称，要点击对应的 "+" 按钮
- 某些规格可能默认已选中（数量为 1），此时不需要点击 "+"
- 确认所有必选规格都已选择后，才能点击"确定"

## 3. 收货地址选择

### 场景
需要选择或填写收货地址

### 操作要点
1. `screenshot()` 查看是否有默认地址,并确认是否是用户希望送货到的地址（比如公司、家里等）
2. 如果需要修改，`tap(text="地址")` 或点击地址栏进入地址管理页面
3. `screenshot()` 查看地址列表
4. `tap(text="目标地址")` 选择目标地址
5. `screenshot()` 确认地址已更新

### 注意事项
- 默认地址通常已选中，无需操作

## 4. 支付方式选择

### 场景
提交订单后选择支付方式

### 操作要点
1. `screenshot()` 查看支付方式选项
2. 识别支付方式选项（微信、支付宝等）
3. `tap(text="微信支付")` 或 `tap(text="支付宝")` 点击对应的支付方式
4. `screenshot()` 确认支付方式已选中
5. `tap(text="确认支付")` 提交支付

### 注意事项
- **实际支付操作需要支付密码，如果用户提供了实际的密码，则进行自动化支付，否则不实际完成支付**
- 在选择支付方式的时候，优先选择可以 “免密支付” 的方式